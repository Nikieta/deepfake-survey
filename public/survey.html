<!DOCTYPE html>
<html>
<head>
  <title>Deepfake Audio Survey</title>
 <style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f6f7fb;
    margin: 0;
    padding: 40px;
    color: #111827;
  }

  .container {
    max-width: 760px;
    margin: auto;
    background: transparent;
  }

  h1 {
    text-align: center;
    margin-bottom: 24px;
  }

  .card {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px 24px;
    margin-bottom: 20px;
  }

  button {
    background: #4f46e5;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
  }

  textarea {
    width: 100%;
    min-height: 80px;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
  }

  audio {
    width: 100%;
    margin: 10px 0;
  }
</style>

</head>

<body>

<div class="container">

<h1>Deepfake Audio Survey</h1>

<div class="card">
  <h2>Participant Information</h2>

  Name:<br>
  <input type="text" id="name"><br><br>

  Age:<br>
  <input type="number" id="age" min="10" max="100">
  <br><br>

  Familiar with deepfakes?<br>
  <input type="radio" name="familiar" value="No"> No  
  <input type="radio" name="familiar" value="Somewhat"> Somewhat  
  <input type="radio" name="familiar" value="Very"> Very  
  <br><br>

  Hearing impairment?<br>
  <input type="radio" name="hearing" value="No"> No  
  <input type="radio" name="hearing" value="Mild"> Mild  
  <input type="radio" name="hearing" value="Significant"> Significant  
</div>

<div class="card">
  <h2>Sample 1</h2>

  <audio controls>
    <source src="audio/DF_E_2000079.flac" type="audio/flac">
  </audio>

  <p><b>How real does this sound?</b></p>
  <input type="radio" name="realness" value="Very Fake"> Very Fake  
  <input type="radio" name="realness" value="Fake"> Fake  
  <input type="radio" name="realness" value="Neutral"> Neutral  
  <input type="radio" name="realness" value="Real"> Real  
  <input type="radio" name="realness" value="Very Real"> Very Real  
</div>

<div class="card">
  <h2>Artifact Categories (select all that apply)</h2>

  <label><input type="checkbox" value="Robot"> Robot-like voice</label><br>
  <label><input type="checkbox" value="Pauses"> Unnatural pauses</label><br>
  <label><input type="checkbox" value="Repetition"> Word repetition</label><br>
  <label><input type="checkbox" value="Prosody"> Prosody mismatch</label><br>
  <label><input type="checkbox" value="Noise"> Background noise artifacts</label>
</div>

<div class="card">
  <h2>Additional Comments</h2>
  <textarea id="comments"></textarea>
</div>

<button onclick="submitSurvey()">Submit</button>
<p id="status"></p>

</div>

<script>
const APPS_SCRIPT_URL = "YOUR_GOOGLE_SCRIPT_URL_HERE";

// Autofill name & age from Page 1
document.getElementById("name").value = localStorage.getItem("name") || "";
document.getElementById("age").value = localStorage.getItem("age") || "";

async function submitSurvey() {

  const name = document.getElementById("name").value.trim();
  const age = document.getElementById("age").value.trim();
  const familiar = document.querySelector('input[name="familiar"]:checked');
  const hearing = document.querySelector('input[name="hearing"]:checked');
  const realness = document.querySelector('input[name="realness"]:checked');

  const checkedArtifacts = document.querySelectorAll('input[type="checkbox"]:checked');

  if (!name || !age || !familiar || !hearing || !realness || checkedArtifacts.length === 0) {
    alert("Please complete all required fields.");
    return;
  }

  let artifacts = [];
  checkedArtifacts.forEach(cb => artifacts.push(cb.value));

  const payload = {
    name: name,
    age: age,
    gender: localStorage.getItem("gender"),
    hearing_page1: localStorage.getItem("hearing"),
    tech_difficulty: localStorage.getItem("tech"),
    familiar: familiar.value,
    hearing_page2: hearing.value,
    realness: realness.value,
    artifacts: artifacts.join(", "),
    comments: document.getElementById("comments").value
  };

  await fetch(APPS_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify(payload)
  });

  document.getElementById("status").innerText =
    "Response recorded successfully!";
}
</script>

</body>
</html>
