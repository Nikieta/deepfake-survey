<!DOCTYPE html>
<html>
<head>
  <title>Deepfake Audio Survey</title>
 <style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f6f7fb;
    margin: 0;
    padding: 40px;
    color: #111827;
  }

  .container {
    max-width: 760px;
    margin: auto;
    background: transparent;
  }

  h1 {
    text-align: center;
    margin-bottom: 24px;
  }

  .card {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px 24px;
    margin-bottom: 20px;
  }

  button {
    background: #4f46e5;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
  }

  textarea {
    width: 100%;
    min-height: 80px;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
  }

  audio {
    width: 100%;
    margin: 10px 0;
  }
</style>

</head>

<body>

<div class="container">

<h1>Deepfake Audio Survey</h1>


<div class="card">
  <h2>Sample 1</h2>

  <audio controls>
    <source src="audio/DF_E_2000079.flac" type="audio/flac">
  </audio>

  <p><b>How real does this sound?</b></p>
  <input type="radio" name="realness" value="Very Fake"> Very Fake  
  <input type="radio" name="realness" value="Fake"> Fake  
  <input type="radio" name="realness" value="Neutral"> Neutral  
  <input type="radio" name="realness" value="Real"> Real  
  <input type="radio" name="realness" value="Very Real"> Very Real  
</div>

<div class="card">
  <h2>Artifact Categories (select all that apply)</h2>

  <label><input type="checkbox" value="Robot"> Robot-like voice</label><br>
  <label><input type="checkbox" value="Pauses"> Unnatural pauses</label><br>
  <label><input type="checkbox" value="Repetition"> Word repetition</label><br>
  <label><input type="checkbox" value="Prosody"> Prosody mismatch</label><br>
  <label><input type="checkbox" value="Noise"> Background noise artifacts</label>
</div>

<div class="card">
  <h2>Additional Comments</h2>
  <textarea id="comments"></textarea>
</div>

<button onclick="submitSurvey()">Submit</button>
<p id="status"></p>

</div>

<script>
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzCy0prM1DFyQpXMErAvRvo2hnSQ_ZbK1rS3rYd9aLVZdd5m9rhDLQWkyDXNp4p40FX/exec";

async function submitSurvey() {

  const realness = document.querySelector('input[name="realness"]:checked');
  const checkedArtifacts = document.querySelectorAll('input[type="checkbox"]:checked');

  if (!realness) {
    alert("Please rate how real the audio sounds.");
    return;
  }

  if (checkedArtifacts.length === 0) {
    alert("Please select at least one artifact category.");
    return;
  }

  let artifacts = [];
  checkedArtifacts.forEach(cb => artifacts.push(cb.value));

  const payload = {

    name: localStorage.getItem("name"),
    age: localStorage.getItem("age"),
    gender: localStorage.getItem("gender"),
    hearing_page1: localStorage.getItem("hearing"),
    tech_difficulty: localStorage.getItem("tech"),
    realness: realness.value,
    artifacts: artifacts.join(", "),
    comments: document.getElementById("comments").value
  };

  await fetch(APPS_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify(payload)
  });

  document.getElementById("status").innerText =
    "Response recorded successfully!";
}
</script>

</body>
</html>
